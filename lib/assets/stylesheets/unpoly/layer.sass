// https://codepen.io/triskweline/pen/gypEVv

=maximize
  top: 0
  left: 0
  bottom: 0
  right: 0

=flavor($flavor)
  .up-layer[up-flavor="#{$flavor}"]
    @content

=large-shadow

=small-shadow
  box-shadow: 0 0 4px rgba(0, 0, 0, 0.3)

.up-layers
  // Create a stacking context for .up-layer children
  // by giving a position and z-index.
  position: absolute
  z-index: 10000

.up-layer
  +maximize
  // Create a stacking context for layer elements
  // by giving a position and z-index.
  position: fixed
  z-index: 0

.up-layer-backdrop
  position: absolute
  +maximize
  background-color: rgba(90, 90, 90, 0.4)

.up-layer-viewport
  position: absolute
  +maximize

  // The viewport always has a scrollbar, except when we're animating (see below)
  overflow-y: scroll
  overflow-x: hidden

  // Prevent users from scrolling a parent layer when they bump
  // into the end of this layer's viewport.
  overscroll-behavior: contain

  // Center .up-layer-frame within the viewport
  display: flex

.up-layer-with-viewport.up-layer-animating
  // During opening/closing animations we let the .up-layer container take over
  // the scrollbars that would usually be owned by .up-layer-viewport.
  // If .up-layer-viewport had a scrollbar while animating with
  // "zoom-in" it would look strange that the scrollbar is scaled.
  &
    overflow-y: scroll
  .up-layer-viewport
    overflow-y: hidden

.up-layer-frame
  position: relative
  box-sizing: border-box
  max-width: 100%
  background-color: #fff
  padding: 20px
  box-shadow: 0 0 10px 1px rgba(0, 0, 0, 0.3)

.up-layer-dismiss
  color: #666
  position: absolute
  top: 5px
  right: 5px

[up-dismiss], [up-accept]
  cursor: pointer

+flavor('modal')
  .up-layer-viewport
    // Implement the margin around the dialog box with a padding of the viewport.
    // This way we can give .up-layer-frame a max-width of 100%, (1) preventing people
    // from setting withs larger than the viewport, and (2) sizing approproately
    // if the modal contents are very wide and cannot wrap (e.g. code blocks).
    padding: 30px 10px

    // Allow frame to grow from the center, up to its max-width of 100%
    justify-content: center

  .up-layer-frame
    +large-shadow

+flavor('drawer')
  &[up-position=left]
    .up-layer-viewport
      // Allow frame to grow from the left, up to its max-width of 100%
      justify-content: flex-start

  &[up-position=right]
    .up-layer-viewport
      // Allow frame to grow from the right, up to its max-width of 100%
      justify-content: flex-end

  .up-layer-frame
    min-height: 100vh
    +large-shadow

+flavor('cover')
  .up-layer-frame
    width: 100%
    min-height: 100vh

+flavor('popup')
  .up-layer-frame
    padding: 15px
    +small-shadow
