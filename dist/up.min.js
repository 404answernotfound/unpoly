(function(){window.up={}}).call(this),function(){var t=[].slice;up.util=function(){var e,n,r,o,u,i,a,s,l,c,p,f,d,m,h,v,g,y,b,w,k,x,C,S,A,E,P,T,D,O,z,U,j,M,F,W,I,N,L,q,H,J,R,K,X,B,G,Q,V,_,Z,Y,te,ee,ne,re,oe,ue,ie,ae,se,le,ce,pe,fe,de,me,he,ve,ge,ye,be,we,ke,$e,xe,Ce,Se,Ae,Ee,Pe,Te,De,Oe;return ne=function(e){var n,r;return n=void 0,r=!1,function(){var o;return o=1<=arguments.length?t.call(arguments,0):[],r?n:(r=!0,n=e.apply(null,o))}},P=function(t,e){return e=e||{},e.url=t,o(e)},o=function(t){return t.selector&&(t.headers={"X-Up-Selector":t.selector}),$.ajax(t)},X=function(t,e){return(""===e||"80"===e)&&"http:"===t||"443"===e&&"https:"===t},ae=function(t,e){var n,r,o;return n=null,B(t)?(n=$("<a>").attr({href:t}).get(0),z(n.hostname)&&(n.href=n.href)):n=Pe(t),r=n.protocol+"//"+n.hostname,X(n.protocol,n.port)||(r+=":"+n.port),o=n.pathname,"/"!==o[0]&&(o="/"+o),(null!=e?e.stripTrailingSlash:void 0)===!0&&(o=o.replace(/\/$/,"")),r+=o,(null!=e?e.hash:void 0)===!0&&(r+=n.hash),(null!=e?e.search:void 0)!==!1&&(r+=n.search),r},ie=function(t){return t?t.toUpperCase():"GET"},e=function(t){var e,n,r,o,u,i,a,s,l,c,p,f,d,m,h,v;for(h=t.split(/[ >]/),r=null,c=p=0,d=h.length;d>p;c=++p){for(i=h[c],u=i.match(/(^|\.|\#)[A-Za-z0-9\-_]+/g),v="div",o=[],l=null,f=0,m=u.length;m>f;f++)switch(a=u[f],a[0]){case".":o.push(a.substr(1));break;case"#":l=a.substr(1);break;default:v=a}s="<"+v,o.length&&(s+=' class="'+o.join(" ")+'"'),l&&(s+=' id="'+l+'"'),s+=">",e=$(s),n&&e.appendTo(n),0===c&&(r=e),n=e}return r},d=function(t,e){var n;return n=document.createElement(t),R(e)&&(n.innerHTML=e),n},g=function(){var e,n;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],n="[UP] "+n,console.debug.apply(console,[n].concat(t.call(e)))},Oe=function(){var e,n;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],n="[UP] "+n,console.warn.apply(console,[n].concat(t.call(e)))},k=function(){var e,n,r;throw n=1<=arguments.length?t.call(arguments,0):[],n[0]="[UP] "+n[0],console.error.apply(console,n),r=xe(n),e=de($(".up-error"))||$('<div class="up-error"></div>').prependTo("body"),e.addClass("up-error"),e.text(r),new Error(r)},r=/\%[odisf]/g,xe=function(t){var e,n,o;return o=t[0],e=0,n=50,o.replace(r,function(){var r,o;return e+=1,r=t[e],o=typeof r,"string"===o?(r=r.replace(/\s+/g," "),r.length>n&&(r=r.substr(0,n)+"\u2026"),r='"'+r+'"'):"number"===o?r=r.toString():(r=JSON.stringify(r),r.length>n&&(r=r.substr(0,n)+"\u2026")),r})},h=function(t){var e,n,r,o,u,i,a;for(g("Creating selector from element %o",t),n=(e=t.attr("class"))?e.split(" "):[],r=t.attr("id"),a=t.prop("tagName").toLowerCase(),r&&(a+="#"+r),o=0,i=n.length;i>o;o++)u=n[o],a+="."+u;return a},m=function(t){var e,n,r,o,u,i,a,s,l,c,p,f;return l=function(t){return"<"+t+"(?: [^>]*)?>"},i=function(t){return"</"+t+">"},e="(?:.|\\n)*?",u=function(t){return"("+t+")"},f=new RegExp(l("head")+e+l("title")+u(e)+i("title")+e+i("body"),"i"),o=new RegExp(l("body")+u(e)+i("body"),"i"),(r=t.match(o))?(s=document.createElement("html"),n=d("body",r[1]),s.appendChild(n),(p=t.match(f))&&(a=d("head"),s.appendChild(a),c=d("title",p[1]),a.appendChild(c)),s):d("div",t)},C=$.extend,Ee=$.trim,_=Object.keys||function(t){var e,n,r,o;for(o=[],e=0,r=t.length;r>e;e++)n=t[e],t.hasOwnProperty(n)&&o.push(n);return o},b=function(t,e){var n,r,o,u,i;for(i=[],n=o=0,u=t.length;u>o;n=++o)r=t[n],i.push(e(r,n));return i},te=b,T=function(t){return t},Se=function(t,e){var n,r,o,u;for(u=[],n=r=0,o=t-1;o>=0?o>=r:r>=o;n=o>=0?++r:--r)u.push(e(n));return u},q=function(t){return null===t},G=function(t){return void 0===t},j=function(t){return!G(t)},L=function(t){return G(t)||q(t)},W=function(t){return!L(t)},z=function(t){return L(t)||J(t)&&0===_(t).length||0===t.length},de=function(t,e){return null==e&&(e=R),e(t)?t:null},R=function(t){return!z(t)},F=function(t){return"function"==typeof t},B=function(t){return"string"==typeof t},H=function(t){return"number"==typeof t},I=function(t){return"object"==typeof t&&!!t},J=function(t){return I(t)||"function"==typeof t},M=function(t){return!(!t||1!==t.nodeType)},N=function(t){return t instanceof jQuery},K=function(t){return J(t)&&F(t.then)},U=function(t){return K(t)&&F(t.resolve)},D=function(t){return W(t)?t:void 0},O=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Ae=function(t){return Array.prototype.slice.call(t)},p=function(t){return O(t)?t.slice():C({},t)},Pe=function(t){return N(t)?t.get(0):t},re=function(t,e){return C(p(t),e)},fe=function(t,e){var n,r,o,u;if(o=t?p(t):{},e)for(r in e)n=e[r],u=o[r],W(u)?J(n)&&J(u)&&(o[r]=fe(u,n)):o[r]=n;return o},pe=function(){var e,n,r,o,u,i;for(n=1<=arguments.length?t.call(arguments,0):[],u=null,r=0,o=n.length;o>r;r++)if(e=n[r],i=e,F(i)&&(i=i()),W(i)){u=i;break}return u},y=function(t,e){var n,r,o,u;for(u=null,r=0,o=t.length;o>r;r++)if(n=t[r],e(n)){u=n;break}return u},s=function(t){return we(t,W)},Te=function(t){var e;return e={},we(t,function(t){return e.hasOwnProperty(t)?!1:e[t]=!0})},we=function(t,e){var n;return n=[],b(t,function(t){return e(t)?n.push(t):void 0}),n},me=function(){var e,n,r,o;return e=arguments[0],r=2<=arguments.length?t.call(arguments,1):[],o=function(){var t,o,u;for(u=[],t=0,o=r.length;o>t;t++)n=r[t],u.push(e.attr(n));return u}(),y(o,R)},ue=function(t){return setTimeout(t,0)},Z=function(t){return t[t.length-1]},a=function(){var t;return t=document.documentElement,{width:t.clientWidth,height:t.clientHeight}},be=ne(function(){var t,e,n;return t=$("<div>").css({position:"absolute",top:"0",left:"0",width:"50px",height:"50px",overflowY:"scroll"}),t.appendTo(document.body),e=t.get(0),n=e.offsetWidth-e.clientWidth,t.remove(),n}),le=function(t){var e;return e=void 0,function(){return null!=t&&(e=t()),t=void 0,e}},Ce=function(t,e,n){var r,o;return o=t.css(_(e)),t.css(e),r=function(){return t.css(o)},n?(n(),r()):le(r)},E=function(t){var e,n;return n=t.css(["transform","-webkit-transform"]),z(n)?(e=function(){return t.css(n)},t.css({transform:"translateZ(0)","-webkit-transform":"translateZ(0)"})):e=function(){},e},v=function(t,e,r){var o,u,i,a,s,l;return o=$(t),up.browser.canCssAnimation()?(r=fe(r,{duration:300,delay:0,easing:"ease"}),u=$.Deferred(),a={"transition-property":_(e).join(", "),"transition-duration":r.duration+"ms","transition-delay":r.delay+"ms","transition-timing-function":r.easing},s=E(o),l=Ce(o,a),o.css(e),u.then(s),u.then(l),o.data(n,u),u.then(function(){return o.removeData(n)}),i=setTimeout(function(){return u.resolve()},r.duration+r.delay),u.then(function(){return clearTimeout(i)}),u):(o.css(e),ye())},n="up-animation-promise",A=function(t){return $(t).each(function(){var t;return(t=$(this).data(n))?t.resolve():void 0})},ee=function(t,e){var n,r,o;return r=(null!=e?e.relative:void 0)?t.position():t.offset(),n={left:r.left,top:r.top},(null!=e?e.inner:void 0)?(n.width=t.width(),n.height=t.height()):(n.width=t.outerWidth(),n.height=t.outerHeight()),(null!=e?e.full:void 0)&&(o=a(),n.right=o.width-(n.left+n.width),n.bottom=o.height-(n.top+n.height)),n},f=function(t,e){var n,r,o,u,i;for(u=t.get(0).attributes,i=[],r=0,o=u.length;o>r;r++)n=u[r],i.push(n.specified?e.attr(n.name,n.value):void 0);return i},S=function(t,e){return t.find(e).addBack(e)},x=function(t){return 27===t.keyCode},$e=function(t,e){return 0===t.indexOf(e)},w=function(t,e){return t.indexOf(e)===t.length-e.length},c=function(t,e){return t.indexOf(e)>=0},i=function(t,e){var n;switch(n=t.attr(e)){case"false":return!1;case"true":return!0;case"":return!0;default:return n}},Y=function(t){return t.getResponseHeader("X-Up-Location")},oe=function(t){return t.getResponseHeader("X-Up-Method")},ce=function(){var e,n,r,o,u,i;for(i=arguments[0],o=2<=arguments.length?t.call(arguments,1):[],e={},n=0,u=o.length;u>n;n++)r=o[n],i.hasOwnProperty(r)&&(e[r]=i[r]);return e},Q=function(t){return!(t.metaKey||t.shiftKey||t.ctrlKey)},V=function(t){var e;return e=G(t.button)||0===t.button,e&&Q(t)},ge=function(){var t;return t=$.Deferred(),t.resolve(),t},ye=function(){return ge().promise()},se=function(){return{is:function(){return!1},attr:function(){},find:function(){return[]}}},ve=function(){var e,n;return e=1<=arguments.length?t.call(arguments,0):[],n=$.when.apply($,e),n.resolve=function(){return b(e,function(t){return"function"==typeof t.resolve?t.resolve():void 0})},n},ke=function(t,e){var n,r,o;r=[];for(n in e)o=e[n],r.push(L(t.attr(n))?t.attr(n,o):void 0);return r},he=function(t,e){var n;return n=t.indexOf(e),n>=0?(t.splice(n,1),e):void 0},u=function(e){var n,r,o,u,i,a,s,l,c,f;return c=void 0,r=function(){return c={}},r(),i=function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],e.log?(n[0]="["+e.log+"] "+n[0],g.apply(null,n)):void 0},a=function(){return L(e.size)?void 0:F(e.size)?e.size():H(e.size)?e.size:k("Invalid size config: %o",e.size)},o=function(){return L(e.expiry)?void 0:F(e.expiry)?e.expiry():H(e.expiry)?e.expiry:k("Invalid expiry config: %o",e.expiry)},s=function(t){return e.key?e.key(t):t.toString()},Ee=function(){var t,e,n,r;return r=p(_(c)),n=a(),n&&r.length>n&&(t=null,e=null,b(r,function(n){var r,o;return r=c[n],o=r.timestamp,!e||e>o?(t=n,e=o):void 0}),t)?delete c[t]:void 0},n=function(t,e){var n;return n=P(t),j(n)?l(e,n):void 0},f=function(){return(new Date).valueOf()},l=function(t,e){var n;return n=s(t),c[n]={timestamp:f(),value:e}},he=function(t){var e;return e=s(t),delete c[e]},u=function(t){var e,n;return e=o(),e?(n=f()-t.timestamp,n<o()):!0},P=function(t,e){var n,r;return null==e&&(e=void 0),r=s(t),(n=c[r])?u(n)?(i("Cache hit for %o",t),n.value):(i("Discarding stale cache entry for %o",t),he(t),e):(i("Cache miss for %o",t),e)},{alias:n,get:P,set:l,remove:he,clear:r}},l=function(t){var e,n;return null==t&&(t={}),n={ensureKeyExists:function(e){return t.hasOwnProperty(e)||k("Unknown setting %o",e)},reset:function(){var r,o,u,i;for(i=p(Object.getOwnPropertyNames(n)),r=0,u=i.length;u>r;r++)o=i[r],c(e,o)||delete n[o];return n.update(p(t))},update:function(t){var e,r,o;if(t){if(B(t))return n.ensureKeyExists(t),n[t];r=[];for(e in t)o=t[e],n.ensureKeyExists(e),r.push(n[e]=o);return r}return n}},e=Object.getOwnPropertyNames(n),n.reset(),n},De=function(t){var e,n;return t=Pe(t),e=t.parentNode,n=Ae(t.childNodes),b(n,function(n){return e.insertBefore(n,t)}),e.removeChild(t)},{presentAttr:me,createElement:d,normalizeUrl:ae,normalizeMethod:ie,createElementFromHtml:m,$createElementFromSelector:e,createSelectorFromElement:h,get:P,ajax:o,extend:C,copy:p,merge:re,options:fe,option:pe,error:k,debug:g,warn:Oe,each:b,map:te,identity:T,times:Se,detect:y,select:we,compact:s,uniq:Te,last:Z,isNull:q,isDefined:j,isUndefined:G,isGiven:W,isMissing:L,isPresent:R,isBlank:z,presence:de,isObject:J,isFunction:F,isString:B,isElement:M,isJQuery:N,isPromise:K,isDeferred:U,isHash:I,ifGiven:D,isUnmodifiedKeyEvent:Q,isUnmodifiedMouseEvent:V,nullJquery:se,unJquery:Pe,nextFrame:ue,measure:ee,temporaryCss:Ce,cssAnimate:v,finishCssAnimate:A,forceCompositing:E,escapePressed:x,copyAttributes:f,findWithSelf:S,contains:c,startsWith:$e,endsWith:w,isArray:O,toArray:Ae,castedAttr:i,locationFromXhr:Y,methodFromXhr:oe,clientSize:a,only:ce,trim:Ee,keys:_,resolvedPromise:ye,resolvedDeferred:ge,resolvableWhen:ve,setMissingAttrs:ke,remove:he,memoize:ne,scrollbarWidth:be,config:l,cache:u,unwrapElement:De}}()}.call(this),function(){up.browser=function(){var t,e,n,r,o,u,i,a,s;return a=up.util,i=function(t,e){var n,r,o,u,i,s;return null==e&&(e={}),i=a.option(e.method,"get").toLowerCase(),"get"===i?location.href=t:$.rails?(s=e.target,o=$.rails.csrfToken(),r=$.rails.csrfParam(),n=$("<form method='post' action='"+t+"'></form>"),u="<input name='_method' value='"+i+"' type='hidden' />",a.isDefined(r)&&a.isDefined(o)&&(u+="<input name='"+r+"' value='"+o+"' type='hidden' />"),s&&n.attr("target",s),n.hide().append(u).appendTo("body"),n.submit()):error("Can't fake a "+i.toUpperCase()+" request without Rails UJS")},s=function(){return location.href},r=function(){var t,e,n,r,o,u,i,a,s;return window.console||(window.console={}),s=function(){},(t=window.console).log||(t.log=s),(e=window.console).info||(e.info=s),(n=window.console).error||(n.error=s),(r=window.console).debug||(r.debug=s),(o=window.console).warn||(o.warn=s),(u=window.console).group||(u.group=s),(i=window.console).groupCollapsed||(i.groupCollapsed=s),(a=window.console).groupEnd||(a.groupEnd=s)},n=a.memoize(function(){return a.isDefined(history.pushState)}),t=a.memoize(function(){return"transition"in document.documentElement.style}),e=a.memoize(function(){return"oninput"in document.createElement("input")}),o=function(){var t,e,n,r,o;return o=$.fn.jquery,r=o.split("."),e=parseInt(r[0]),n=parseInt(r[1]),t=e>=2||1===e&&n>=9,t||a.error("jQuery %o found, but Up.js requires 1.9+",o)},u=a.memoize(function(){return a.isDefined(document.addEventListener)}),{url:s,ensureConsoleExists:r,loadPage:i,canPushState:n,canCssAnimation:t,canInputEvent:e,isSupported:u,ensureRecentJquery:o}}()}.call(this),function(){var t=[].slice;up.bus=function(){var e,n,r,o,u,i,a,s,l;return l=up.util,e={},r={},i=function(){return e=l.copy(r)},n=function(t){return e[t]||(e[t]=[])},a=function(){var t,n,o;r={},o=[];for(n in e)t=e[n],o.push(r[n]=l.copy(t));return o},u=function(t,e){var r,o,u,i;for(i=t.split(" "),o=0,u=i.length;u>o;o++)r=i[o],n(r).push(e);return function(){return s(t,e)}},s=function(t,e){var r,o,u,i,a;for(i=t.split(" "),a=[],o=0,u=i.length;u>o;o++)r=i[o],a.push(l.remove(n(r),e));return a},o=function(){var e,r,o;return o=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],r=n(o),l.each(r,function(t){return t.apply(null,e)})},u("framework:ready",a),u("framework:reset",i),{on:u,off:s,emit:o}}()}.call(this),function(){var t=[].slice;up.magic=function(){var e,n,r,o,u,i,a,s,l,c,p,f,d,m,h,v,g;return g=up.util,e="up-destroyable",n="up-destroyer",f=[],l=null,p=function(t,e,n){var r,o;if(up.browser.isSupported())return r=[t,e,function(t){return n.apply(this,[t,$(this),a(this)])}],f.push(r),(o=$(document)).on.apply(o,r)},i=[],s=null,u=function(){var e,n,r;return r=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],up.browser.isSupported()?(u=e.pop(),n=g.options(e[0],{batch:!1}),i.push({selector:r,callback:u,batch:n.batch})):void 0},r=function(t,r,o){var u;return g.debug("Applying compiler %o on %o",t.selector,o),u=t.callback.apply(o,[r,a(r)]),g.isFunction(u)?(r.addClass(e),r.data(n,u)):void 0},o=function(t){var e,n,o,a;for(g.debug("Compiling fragment %o",t),a=[],n=0,o=i.length;o>n;n++)u=i[n],e=g.findWithSelf(t,u.selector),a.push(e.length?u.batch?r(u,e,e.get()):e.each(function(){return r(u,$(this),this)}):void 0);return a},c=function(t){return g.findWithSelf(t,"."+e).each(function(){var t,e;return t=$(this),(e=t.data(n))()})},a=function(t){var e,n;return e=$(t),n=e.attr("up-data"),g.isString(n)&&""!==g.trim(n)?JSON.parse(n):{}},v=function(){return l=g.copy(f),s=g.copy(i)},h=function(){var t,e,n,r;for(e=0,n=f.length;n>e;e++)t=f[e],g.contains(l,t)||(r=$(document)).off.apply(r,t);return f=g.copy(l),i=g.copy(s)},m=function(t){var e;return e=$(t),up.bus.emit("fragment:ready",e),e},d=function(t){return p("keydown","body",function(e){return g.escapePressed(e)?t(e):void 0})},up.bus.on("app:ready",function(){return m(document.body)}),up.bus.on("fragment:ready",o),up.bus.on("fragment:destroy",c),up.bus.on("framework:ready",v),up.bus.on("framework:reset",h),{compiler:u,on:p,ready:m,onEscape:d,data:a}}(),up.compiler=up.magic.compiler,up.on=up.magic.on,up.ready=up.magic.ready,up.awaken=function(){var e;return e=1<=arguments.length?t.call(arguments,0):[],up.util.warn("up.awaken has been renamed to up.compiler and will be removed in a future version"),up.compiler.apply(up,e)}}.call(this),function(){up.history=function(){var t,e,n,r,o,u,i,a,s,l,c,p,f,d,m,h;return h=up.util,e=h.config({popTargets:["body"],restoreScroll:!0}),l=void 0,u=void 0,d=function(){return e.reset(),l=void 0,u=void 0},i=function(t){return h.normalizeUrl(t,{hash:!0})},n=function(){return i(up.browser.url())},r=function(t){return i(t)===n()},a=function(t){return console.log("observing new url %o",t),u&&(l=u,u=void 0),u=t},f=function(t,e){return o("replace",t,e)},c=function(t,e){return o("push",t,e)},o=function(e,o,u){var i,s;return u=h.options(u,{force:!1}),u.force||!r(o)?up.browser.canPushState()?(i=e+"State",s=t(),h.debug("Changing history to URL %o (%o)",o,e),window.history[i](s,"",o),a(n())):h.error("This browser doesn't support history.pushState"):void 0},t=function(){return{fromUp:!0}},m=function(t){var r,o;return o=n(),h.debug("Restoring state %o (now on "+o+")",t),r=e.popTargets.join(", "),up.replace(r,o,{history:!1,reveal:!1,transition:"none",saveScroll:!1,restoreScroll:e.restoreScroll})},s=function(t){var e;return h.debug("History state popped to URL %o",n()),a(n()),up.layout.saveScroll({url:l}),e=t.originalEvent.state,(null!=e?e.fromUp:void 0)?m(e):h.debug("Discarding unknown state %o",e)},up.browser.canPushState()&&(p=function(){return $(window).on("popstate",s),f(n(),{force:!0})},"undefined"!=typeof jasmine&&null!==jasmine?p():setTimeout(p,100)),up.compiler("[up-back]",function(t){return console.log("up-back",t,l),h.isPresent(l)?(h.setMissingAttrs(t,{"up-href":l,"up-restore-scroll":""}),t.removeAttr("up-back"),up.link.makeFollowable(t)):void 0}),up.bus.on("framework:reset",d),{defaults:e.update,push:c,replace:f,url:n,previousUrl:function(){return l},normalizeUrl:i}}()}.call(this),function(){var t=[].slice;up.layout=function(){var e,n,r,o,u,i,a,s,l,c,p,f,d,m,h,v;return f=up.util,n=f.config({duration:0,viewports:["body",".up-modal","[up-viewport]"],fixedTop:["[up-fixed~=top]"],fixedBottom:["[up-fixed~=bottom]"],snap:50,substance:150,easing:"swing"}),o=f.cache({size:30,key:up.history.normalizeUrl}),i=function(){return n.reset(),o.clear()},e="up-scroll-promise",c=function(t,o,u){var i,a,s,l,c;return i=$(t),u=f.options(u),s=f.option(u.duration,n.duration),l=f.option(u.easing,n.easing),r(i),s>0?(a=$.Deferred(),i.data(e,a),a.then(function(){return i.removeData(e),i.finish()}),c={scrollTop:o},i.animate(c,{duration:s,easing:l,complete:function(){return a.resolve()}}),a):(i.scrollTop(o),f.resolvedDeferred())},r=function(t){return $(t).each(function(){var t;return(t=$(this).data(e))?t.resolve():void 0})},u=function(){var e,r,o,u;return o=function(t,e){var n,r;return n=$(t),r=n.css(e),f.isPresent(r)||f.error("Fixed element %o must have a CSS attribute %o",n,e),parseInt(r)+n.height()},r=function(){var t,e,r,i;for(r=$(n.fixedTop.join(", ")),i=[],t=0,e=r.length;e>t;t++)u=r[t],i.push(o(u,"top"));return i}(),e=function(){var t,e,r,i;for(r=$(n.fixedBottom.join(", ")),i=[],t=0,e=r.length;e>t;t++)u=r[t],i.push(o(u,"bottom"));return i}(),{top:Math.max.apply(Math,[0].concat(t.call(r))),bottom:Math.max.apply(Math,[0].concat(t.call(e)))}},s=function(t,e){var r,o,i,a,s,l,p,m,h,v,g,y,b,w;return e=f.options(e),r=$(t),o=d(r,e.viewport),y=f.option(e.snap,n.snap),w=o.is("body"),b=w?f.clientSize().height:o.height(),h=o.scrollTop(),l=h,m=void 0,p=void 0,w?(p=u(),m=0):(p={top:0,bottom:0},m=h),v=function(){return l+p.top},g=function(){return l+b-p.bottom-1},i=f.measure(r,{relative:!0}),a=i.top+m,s=a+Math.min(i.height,n.substance)-1,s>g()&&(l+=s-g()),a<v()&&(l=a-p.top),y>l&&(l=0),l!==h?c(o,l,e):f.resolvedDeferred()},m=function(){return n.viewports.join(", ")},d=function(t,e){var n,r,o;return n=$(t),r=void 0,f.isJQuery(e)?r=e:(o=f.presence(e)||m(),r=n.closest(o)),r.length||f.error("Could not find viewport for %o",n),r},v=function(t){var e;return e=$(t),f.findWithSelf(e,m())},h=function(){return $(m())},p=function(){var t,e,r,o,u,i;for(u={},o=n.viewports,e=0,r=o.length;r>e;e++)i=o[e],t=$(i),t.length&&(u[i]=t.scrollTop());return u},l=function(t){var e,n;return null==t&&(t={}),n=f.option(t.url,up.history.url()),e=f.option(t.tops,p()),o.set(n,e)},a=function(t){var e,n,r,u,i,a;null==t&&(t={}),n=t.within?v(t.within):h(),a=o.get(up.history.url()),r=[];for(i in a)u=a[i],e=n.filter(i),r.push(up.scroll(e,u,{duration:0}));return r},up.bus.on("framework:reset",i),{reveal:s,scroll:c,finishScrolling:r,defaults:n.update,viewportOf:d,viewportsIn:v,viewports:h,scrollTops:p,saveScroll:l,restoreScroll:a}}(),up.scroll=up.layout.scroll,up.reveal=up.layout.reveal}.call(this),function(){up.flow=function(){var t,e,n,r,o,u,i,a,s,l,c,p,f,d,m,h,v,g;return g=up.util,m=function(t,e){var n;return n=$(t),g.isPresent(e)&&(e=g.normalizeUrl(e)),n.attr("up-source",e)},h=function(t){var e;return e=$(t).closest("[up-source]"),g.presence(e.attr("up-source"))||up.browser.url()},p=function(t,e,n){var r,o,u;return g.debug("Replace %o with %o",t,e),n=g.options(n),u=g.presence(t)?t:g.createSelectorFromElement($(t)),up.browser.canPushState()||n.history===!1?(o={url:e,method:n.method,selector:u,cache:n.cache,preload:n.preload},r=up.proxy.ajax(o),r.done(function(t,r,a){var s,l;return(s=g.locationFromXhr(a))&&(g.debug("Location from server: %o",s),l={url:s,method:g.methodFromXhr(a),selector:u},up.proxy.alias(o,l),e=s),n.history!==!1&&(n.history=e),n.source!==!1&&(n.source=e),n.preload?void 0:i(u,t,n)}),r.fail(g.error),r):(n.preload||up.browser.loadPage(e,g.only(n,"method")),g.resolvedPromise())},i=function(t,e,n){var o,u,i,a,c,p,f,d;for(n=g.options(n,{historyMethod:"push"}),n.source=g.option(n.source,n.history),p=l(e),n.title||(n.title=p.title()),n.saveScroll!==!1&&up.layout.saveScroll(),c=s(t,n),f=[],i=0,a=c.length;a>i;i++)d=c[i],u=r(d.selector),o=p.find(d.selector).first(),f.push(v(u,o,d.pseudoClass,d.transition,n));return f},r=function(t){return o(".up-popup "+t)||o(".up-modal "+t)||o(t)||u(t)},u=function(t){var e;return e="Could not find selector %o in current body HTML","#"===e[0]&&(e+=" (avoid using IDs)"),g.error(e,t)},l=function(t){var e;return e=g.createElementFromHtml(t),{title:function(){var t;return null!=(t=e.querySelector("title"))?t.textContent:void 0},find:function(n){var r;return(r=e.querySelector(n))?$(r):g.error("Could not find selector %o in response %o",n,t)}}},d=function(t,e){return e.reveal?up.reveal(t):g.resolvedDeferred()},n=function(e,n){return"function"==typeof n.insert&&n.insert(e),n.history&&(n.title&&(document.title=n.title),up.history[n.historyMethod](n.history)),n.source!==!1&&m(e,n.source),n.restoreScroll&&up.layout.restoreScroll({within:e}),t(e),up.ready(e)},v=function(t,r,o,u,i){var a,s;return u||(u="none"),up.motion.finish(t),o?(s="before"===o?"prepend":"append",a=r.contents().wrap('<span class="up-insertion"></span>').parent(),t[s](a),g.copyAttributes(r,t),n(a.children(),i),d(a,i).then(function(){return up.animate(a,u,i)}).then(function(){g.unwrapElement(a)})):d(t,i).then(function(){return e(t,{animation:function(){return r.insertBefore(t),n(r,i),t.is("body")&&"none"!==u&&g.error("Cannot apply transitions to body-elements (%o)",u),up.morph(t,r,u,i)}})})},s=function(t,e){var n,r,o,u,i,a,s,l,c,p,f;for(p=e.transition||e.animation||"none",n=/\ *,\ */,r=t.split(n),g.isPresent(p)&&(f=p.split(n)),a=[],o=u=0,i=r.length;i>u;o=++u)s=r[o],l=s.match(/^(.+?)(?:\:(before|after))?$/),c=f[o]||g.last(f),a.push({selector:l[1],pseudoClass:l[2],transition:c});return a},t=function(t){var e,n;return n="[autofocus]:last",e=g.findWithSelf(t,n),e.length&&e.get(0)!==document.activeElement?e.focus():void 0},a=function(t){var e;return e=".up-ghost, .up-destroying",0===t.closest(e).length},o=function(t){var e,n,r,o,u,i;for(o=$(t).get(),n=null,u=0,i=o.length;i>u;u++)if(r=o[u],e=$(r),a(e)){n=e;break}return n},e=function(t,e){var n,r,o;return n=$(t),e=g.options(e,{animation:"none"}),r=up.motion.animateOptions(e),n.addClass("up-destroying"),g.isPresent(e.url)&&up.history.push(e.url),g.isPresent(e.title)&&(document.title=e.title),up.bus.emit("fragment:destroy",n),o=g.presence(e.animation,g.isPromise)||up.motion.animate(n,e.animation,r),o.then(function(){return n.remove()}),o},c=function(t,e){var n;return e=g.options(e,{cache:!1}),n=e.url||h(t),p(t,n,e)},f=function(){return up.bus.emit("framework:reset")},up.bus.on("app:ready",function(){return m(document.body,up.browser.url())}),{replace:p,reload:c,destroy:e,implant:i,reset:f,first:o}}(),up.replace=up.flow.replace,up.reload=up.flow.reload,up.destroy=up.flow.destroy,up.reset=up.flow.reset,up.first=up.flow.first}.call(this),function(){up.motion=function(){var t,e,n,r,o,u,i,a,s,l,c,p,f,d,m,h,v,g,y,b,w,k;return w=up.util,o={},a={},b={},s={},i=w.config({duration:300,delay:0,easing:"ease"}),h=function(){return o=w.copy(a),b=w.copy(s),i.reset()},e=function(t,r,o){var i;return i=$(t),c(i),o=n(o),("none"===r||r===!1)&&d(),w.isFunction(r)?u(r(i,o),r):w.isString(r)?e(i,l(r),o):w.isHash(r)?w.cssAnimate(i,r,o):w.error("Unknown animation type %o",r)},n=function(t,e){var n;return null==e&&(e=null),t=w.options(t),n={},n.easing=w.option(t.easing,null!=e?e.attr("up-easing"):void 0,i.easing),n.duration=Number(w.option(t.duration,null!=e?e.attr("up-duration"):void 0,i.duration)),n.delay=Number(w.option(t.delay,null!=e?e.attr("up-delay"):void 0,i.delay)),n},l=function(t){return o[t]||w.error("Unknown animation %o",r)},t="up-ghosting-promise",k=function(e,n,r){var o,u,i,a;return u=null,o=null,w.temporaryCss(n,{display:"none"},function(){return u=m(e),u.$ghost.addClass("up-destroying"),u.$bounds.addClass("up-destroying")}),w.temporaryCss(e,{display:"none"},function(){return o=m(n)}),e.css({visibility:"hidden"}),a=w.temporaryCss(n,{display:"none"}),i=r(u.$ghost,o.$ghost),e.data(t,i),n.data(t,i),i.then(function(){return e.removeData(t),n.removeData(t),u.$bounds.remove(),o.$bounds.remove(),e.css({display:"none"}),a()}),i},c=function(t){return $(t).each(function(){var t;return t=$(this),w.finishCssAnimate(t),p(t)})},p=function(e){var n;return(n=e.data(t))?(w.debug("Canceling existing ghosting on %o",e),"function"==typeof n.resolve?n.resolve():void 0):void 0},u=function(t,e){return w.isDeferred(t)?t:w.error("Did not return a promise with .then and .resolve methods: %o",e)},f=function(t,r,i,a){var s,l,p,m,h;return up.browser.canCssAnimation()?(a=n(a),l=$(t),s=$(r),c(l),c(s),"none"===i||i===!1?d():(h=w.presence(i,w.isFunction)||b[i])?k(l,s,function(t,e){return u(h(t,e,a),i)}):(p=o[i])?(l.hide(),e(s,p,a)):w.isString(i)&&i.indexOf("/")>=0?(m=i.split("/"),h=function(t,n,r){return v(e(t,m[0],r),e(n,m[1],r))},f(l,s,h,a)):w.error("Unknown transition %o",i)):w.resolvedDeferred()},m=function(t){var e,n,r,o;return o=w.measure(t,{relative:!0,inner:!0}),n=t.clone(),n.find("script").remove(),n.css({position:"static"===t.css("position")?"static":"relative",top:"",right:"",bottom:"",left:"",width:"100%",height:"100%"}),n.addClass("up-ghost"),e=$('<div class="up-bounds"></div>'),e.css({position:"absolute"}),e.css(o),n.appendTo(e),e.insertBefore(t),r=n.offset().top-t.offset().top,0!==r&&e.css({top:o.top-r}),{$ghost:n,$bounds:e}},y=function(t,e){return b[t]=e},r=function(t,e){return o[t]=e},g=function(){return a=w.copy(o),s=w.copy(b)},v=w.resolvableWhen,d=w.resolvedDeferred,r("none",d),r("fade-in",function(t,n){return t.css({opacity:0}),e(t,{opacity:1},n)}),r("fade-out",function(t,n){return t.css({opacity:1}),e(t,{opacity:0},n)}),r("move-to-top",function(t,n){var r,o;return r=w.measure(t),o=r.top+r.height,t.css({"margin-top":"0px"}),e(t,{"margin-top":"-"+o+"px"},n)}),r("move-from-top",function(t,n){var r,o;return r=w.measure(t),o=r.top+r.height,t.css({"margin-top":"-"+o+"px"}),e(t,{"margin-top":"0px"},n)}),r("move-to-bottom",function(t,n){var r,o;return r=w.measure(t),o=w.clientSize().height-r.top,t.css({"margin-top":"0px"}),e(t,{"margin-top":o+"px"},n)}),r("move-from-bottom",function(t,n){var r,o;return r=w.measure(t),o=w.clientSize().height-r.top,t.css({"margin-top":o+"px"}),e(t,{"margin-top":"0px"},n)}),r("move-to-left",function(t,n){var r,o;return r=w.measure(t),o=r.left+r.width,t.css({"margin-left":"0px"}),e(t,{"margin-left":"-"+o+"px"},n)}),r("move-from-left",function(t,n){var r,o;return r=w.measure(t),o=r.left+r.width,t.css({"margin-left":"-"+o+"px"}),e(t,{"margin-left":"0px"},n)}),r("move-to-right",function(t,n){var r,o;return r=w.measure(t),o=w.clientSize().width-r.left,t.css({"margin-left":"0px"}),e(t,{"margin-left":o+"px"},n)}),r("move-from-right",function(t,n){var r,o;return r=w.measure(t),o=w.clientSize().width-r.left,t.css({"margin-left":o+"px"}),e(t,{"margin-left":"0px"},n)}),r("roll-down",function(t,n){var r,o;return r=t.height(),o=w.temporaryCss(t,{height:"0px",overflow:"hidden"}),e(t,{height:r+"px"},n).then(o)}),y("none",d),y("move-left",function(t,n,r){return v(e(t,"move-to-left",r),e(n,"move-from-right",r))}),y("move-right",function(t,n,r){return v(e(t,"move-to-right",r),e(n,"move-from-left",r))}),y("move-up",function(t,n,r){return v(e(t,"move-to-top",r),e(n,"move-from-bottom",r))}),y("move-down",function(t,n,r){return v(e(t,"move-to-bottom",r),e(n,"move-from-top",r))}),y("cross-fade",function(t,n,r){return v(e(t,"fade-out",r),e(n,"fade-in",r))}),up.bus.on("framework:ready",g),up.bus.on("framework:reset",h),{morph:f,animate:e,animateOptions:n,finish:c,transition:y,animation:r,defaults:i.update,none:d,when:v,prependGhost:m}}(),up.transition=up.motion.transition,up.animation=up.motion.animation,up.morph=up.motion.morph,up.animate=up.motion.animate}.call(this),function(){up.proxy=function(){var t,e,n,r,o,u,i,a,s,l,c,p,f,d,m,h,v,g,y,b,w,k,x,C,S,A,E,P,T;return T=up.util,t=void 0,C=void 0,u=void 0,k=void 0,i=void 0,d=T.config({busyDelay:300,preloadDelay:75,cacheSize:70,cacheExpiry:3e5}),s=function(t){return w(t),[t.url,t.method,t.data,t.selector].join("|")},a=T.cache({size:function(){return d.cacheSize},expiry:function(){return d.cacheExpiry},key:s,log:"up.proxy"}),m=a.get,E=a.set,S=a.remove,f=a.clear,c=function(){return clearTimeout(C),C=null},l=function(){return clearTimeout(u),u=null},A=function(){return t=null,c(),l(),k=0,d.reset(),i=!1,a.clear()},A(),r=a.alias,w=function(t){return t._normalized||(t.method=T.normalizeMethod(t.method),t.url&&(t.url=T.normalizeUrl(t.url)),t.selector||(t.selector="body"),t._normalized=!0),t},n=function(t){var e,n,r,o,u;return e=t.cache===!0,n=t.cache===!1,u=T.only(t,"url","method","data","selector","_normalized"),r=!0,v(u)||e?(o=m(u))&&!n?r="pending"===o.state():(o=g(u),E(u,o)):(f(),o=g(u)),r&&!t.preload&&(b(),o.then(y)),o},e=["GET","OPTIONS","HEAD"],h=function(){return 0===k},o=function(){return k>0},b=function(){var t,e;return e=h(),k+=1,e?(t=function(){return o()?(up.bus.emit("proxy:busy"),i=!0):void 0},d.busyDelay>0?u=setTimeout(t,d.busyDelay):t()):void 0},y=function(){return k-=1,h()&&i?(up.bus.emit("proxy:idle"),i=!1):void 0},g=function(t){var e;return up.bus.emit("proxy:load",t),e=T.ajax(t),e.then(function(){return up.bus.emit("proxy:receive",t)}),e},v=function(t){return w(t),T.contains(e,t.method)},p=function(e){var n,r;return r=parseInt(T.presentAttr(e,"up-delay"))||d.preloadDelay,e.is(t)?void 0:(t=e,c(),n=function(){return x(e)},P(n,r))},P=function(t,e){return C=setTimeout(t,e)},x=function(t,e){var n,r;return n=$(t),e=T.options(e),r=up.link.followMethod(n,e),v({method:r})?(T.debug("Preloading %o",n),e.preload=!0,up.link.follow(n,e)):(T.debug("Won't preload %o due to unsafe method %o",n,r),T.resolvedPromise())},up.on("mouseover mousedown touchstart","[up-preload]",function(t,e){return up.link.childClicked(t,e)?void 0:p(e)}),up.bus.on("framework:reset",A),{preload:x,ajax:n,get:m,set:E,alias:r,clear:f,remove:S,idle:h,busy:o,defaults:d.update}}()}.call(this),function(){up.link=function(){var childClicked,follow,followMethod,makeFollowable,shouldProcessLinkEvent,u,visit;return u=up.util,visit=function(t,e){var n;return e=u.options(e),n=u.option(e.target,"body"),up.replace(n,t,e)},follow=function(t,e){var n,r,o;return n=$(t),e=u.options(e),o=u.option(n.attr("up-href"),n.attr("href")),r=u.option(e.target,n.attr("up-target"),"body"),e.transition=u.option(e.transition,u.castedAttr(n,"up-transition"),u.castedAttr(n,"up-animation")),e.history=u.option(e.history,u.castedAttr(n,"up-history")),e.reveal=u.option(e.reveal,u.castedAttr(n,"up-reveal"),!0),e.cache=u.option(e.cache,u.castedAttr(n,"up-cache")),e.restoreScroll=u.option(e.restoreScroll,u.castedAttr(n,"up-restore-scroll")),e.method=followMethod(n,e),e=u.merge(e,up.motion.animateOptions(e,n)),up.replace(r,o,e)},followMethod=function(t,e){return e=u.options(e),u.option(e.method,t.attr("up-method"),t.attr("data-method"),"get").toUpperCase()},up.on("click","a[up-target], [up-href][up-target]",function(t,e){return shouldProcessLinkEvent(t,e)?e.is("[up-instant]")?t.preventDefault():(t.preventDefault(),follow(e)):void 0}),up.on("mousedown","a[up-instant], [up-href][up-instant]",function(t,e){return shouldProcessLinkEvent(t,e)?(t.preventDefault(),follow(e)):void 0}),childClicked=function(t,e){var n,r;return n=$(t.target),r=n.closest("a, [up-href]"),r.length&&e.find(r).length},shouldProcessLinkEvent=function(t,e){return u.isUnmodifiedMouseEvent(t)&&!childClicked(t,e)},makeFollowable=function(t){var e;return e=$(t),u.isMissing(e.attr("up-target"))&&u.isMissing(e.attr("up-follow"))?e.attr("up-follow",""):void 0
},up.on("click","a[up-follow], [up-href][up-follow]",function(t,e){return shouldProcessLinkEvent(t,e)?e.is("[up-instant]")?t.preventDefault():(t.preventDefault(),follow(e)):void 0}),up.compiler("[up-expand]",function(t){var e,n,r,o,i,a,s,l;for(o=t.find("a, [up-href]").get(0),o||u.error("No link to expand within %o",t),l=/^up-/,a={},a["up-href"]=$(o).attr("href"),s=o.attributes,n=0,r=s.length;r>n;n++)e=s[n],i=e.name,i.match(l)&&(a[i]=e.value);return u.setMissingAttrs(t,a),t.removeAttr("up-expand"),makeFollowable(t)}),up.compiler("[up-dash]",function(t){var e,n;return n=u.castedAttr(t,"up-dash"),e={"up-preload":"true","up-instant":"true"},n===!0?e["up-follow"]="":e["up-target"]=n,u.setMissingAttrs(t,e),t.removeAttr("up-dash")}),{knife:eval("undefined"!=typeof Knife&&null!==Knife?Knife.point:void 0),visit:visit,follow:follow,makeFollowable:makeFollowable,childClicked:childClicked,followMethod:followMethod}}(),up.visit=up.link.visit,up.follow=up.link.follow}.call(this),function(){up.form=function(){var observe,submit,u;return u=up.util,submit=function(t,e){var n,r,o,i,a,s,l,c,p,f,d,m;return n=$(t).closest("form"),e=u.options(e),c=u.option(e.target,n.attr("up-target"),"body"),r=u.option(e.failTarget,n.attr("up-fail-target"),function(){return u.createSelectorFromElement(n)}),i=u.option(e.history,u.castedAttr(n,"up-history"),!0),p=u.option(e.transition,u.castedAttr(n,"up-transition")),o=u.option(e.failTransition,u.castedAttr(n,"up-fail-transition"),p),a=u.option(e.method,n.attr("up-method"),n.attr("data-method"),n.attr("method"),"post").toUpperCase(),s={},s.reveal=u.option(e.reveal,u.castedAttr(n,"up-reveal"),!0),s.cache=u.option(e.cache,u.castedAttr(n,"up-cache")),s.restoreScroll=u.option(e.restoreScroll,u.castedAttr(n,"up-restore-scroll")),s=u.extend(s,up.motion.animateOptions(e,n)),m=u.option(e.cache,u.castedAttr(n,"up-cache")),d=u.option(e.url,n.attr("action"),up.browser.url()),n.addClass("up-active"),up.browser.canPushState()||i===!1?(l={url:d,method:a,data:n.serialize(),selector:c,cache:m},f=function(t){var e;return d=void 0,u.isGiven(i)&&(i===!1||u.isString(i)?d=i:(e=u.locationFromXhr(t))?d=e:"GET"===l.type&&(d=l.url+"?"+l.data)),u.option(d,!1)},up.proxy.ajax(l).always(function(){return n.removeClass("up-active")}).done(function(t,e,n){var r;return r=u.merge(s,{history:f(n),transition:p}),up.flow.implant(c,t,r)}).fail(function(t){var e,n;return n=t.responseText,e=u.merge(s,{transition:o}),up.flow.implant(r,n,e)})):void n.get(0).submit()},observe=function(fieldOrSelector,options){var $field,callback,callbackPromise,callbackTimer,changeEvents,check,clearTimer,codeOnChange,delay,knownValue,nextCallback,runNextCallback;return $field=$(fieldOrSelector),options=u.options(options),delay=u.option($field.attr("up-delay"),options.delay,0),delay=parseInt(delay),knownValue=null,callback=null,callbackTimer=null,(codeOnChange=$field.attr("up-observe"))?callback=function(value,$field){return eval(codeOnChange)}:options.change?callback=options.change:u.error("up.observe: No change callback given"),callbackPromise=u.resolvedPromise(),nextCallback=null,runNextCallback=function(){var t;return nextCallback?(t=nextCallback(),nextCallback=null,t):void 0},check=function(){var t,e;return e=$field.val(),t=u.isNull(knownValue),knownValue===e||(knownValue=e,t)?void 0:(clearTimer(),nextCallback=function(){return callback.apply($field.get(0),[e,$field])},callbackTimer=setTimeout(function(){return callbackPromise.then(function(){var t;return t=runNextCallback(),callbackPromise=u.isPromise(t)?t:u.resolvedPromise()})},delay))},clearTimer=function(){return clearTimeout(callbackTimer)},changeEvents=up.browser.canInputEvent()?"input change":"input change keypress paste cut click propertychange",$field.on(changeEvents,check),check(),clearTimer},up.on("submit","form[up-target]",function(t,e){return t.preventDefault(),submit(e)}),up.compiler("[up-observe]",function(t){return observe(t)}),{submit:submit,observe:observe}}(),up.submit=up.form.submit,up.observe=up.form.observe}.call(this),function(){up.popup=function(){var t,e,n,r,o,u,i,a,s,l,c,p,f,d,m;return d=up.util,u=void 0,n=d.config({openAnimation:"fade-in",closeAnimation:"fade-out",position:"bottom-right"}),c=function(){return e(),n.reset()},p=function(t,e,n){var r,o;return o=d.measure(t,{full:!0}),r=function(){switch(n){case"bottom-right":return{right:o.right,top:o.top+o.height};case"bottom-left":return{left:o.left,top:o.bottom+o.height};case"top-right":return{right:o.right,bottom:o.top};case"top-left":return{left:o.left,bottom:o.top};default:return d.error("Unknown position %o",n)}}(),e.attr("up-position",n),e.css(r),a(e)},a=function(t){var e,n,r,o,u,i,a;if(n=d.measure(t,{full:!0}),r=null,o=null,n.right<0&&(r=-n.right),n.bottom<0&&(o=-n.bottom),n.left<0&&(r=n.left),n.top<0&&(o=n.top),r&&((u=parseInt(t.css("left")))?t.css("left",u-r):(i=parseInt(t.css("right")))&&t.css("right",i+r)),o){if(a=parseInt(t.css("top")))return t.css("top",a-o);if(e=parseInt(t.css("bottom")))return t.css("bottom",e+o)}},l=function(){var t;return t=$(".up-popup"),t.attr("up-previous-url",up.browser.url()),t.attr("up-previous-title",document.title)},i=function(){var t;return t=$(".up-popup"),t.removeAttr("up-previous-url"),t.removeAttr("up-previous-title")},o=function(t,e,n){var r,o;return o=d.$createElementFromSelector(".up-popup"),n&&o.attr("up-sticky",""),r=d.$createElementFromSelector(e),r.appendTo(o),o.appendTo(document.body),l(),o.hide(),o},m=function(t,e,n,r,o){return e.show(),p(t,e,n),up.animate(e,r,o)},s=function(t,r){var u,i,a,s,l,c,p,f,h;return u=$(t),r=d.options(r),h=d.option(r.url,u.attr("href")),p=d.option(r.target,u.attr("up-popup"),"body"),c=d.option(r.position,u.attr("up-position"),n.position),s=d.option(r.animation,u.attr("up-animation"),n.openAnimation),f=d.option(r.sticky,d.castedAttr(u,"up-sticky")),l=up.browser.canPushState()?d.option(r.history,d.castedAttr(u,"up-history"),!1):!1,a=up.motion.animateOptions(r,u),e(),i=o(u,p,f),up.replace(p,h,{history:l,insert:function(){return m(u,i,c,s,a)}})},f=function(){return u},e=function(t){var e;return e=$(".up-popup"),e.length?(t=d.options(t,{animation:n.closeAnimation,url:e.attr("up-previous-url"),title:e.attr("up-previous-title")}),u=void 0,up.destroy(e,t)):d.resolvedPromise()},t=function(){return $(".up-popup").is("[up-sticky]")?void 0:(i(),e())},r=function(t){var e;return e=$(t),e.closest(".up-popup").length>0},up.on("click","a[up-popup]",function(t,n){return t.preventDefault(),n.is(".up-current")?e():s(n)}),up.on("click","body",function(t){var n;return n=$(t.target),n.closest(".up-popup").length||n.closest("[up-popup]").length?void 0:e()}),up.bus.on("fragment:ready",function(e){var n;return r(e)?(n=e.attr("up-source"))?u=n:void 0:t()}),up.magic.onEscape(function(){return e()}),up.on("click","[up-close]",function(t,n){return n.closest(".up-popup")?e():void 0}),up.bus.on("framework:reset",c),{open:s,close:e,source:f,defaults:n.update,contains:r}}()}.call(this),function(){var t=[].slice;up.modal=function(){var e,n,r,o,u,i,a,s,l,c,p,f,d,m,h,v;return m=up.util,r=m.config({maxWidth:void 0,minWidth:void 0,width:void 0,height:void 0,openAnimation:"fade-in",closeAnimation:"fade-out",closeLabel:"\xd7",template:function(t){return'<div class="up-modal">\n  <div class="up-modal-dialog">\n    <div class="up-modal-close" up-close>'+t.closeLabel+'</div>\n    <div class="up-modal-content"></div>\n  </div>\n</div>'}}),i=void 0,c=function(){return n(),i=void 0,r.reset()},d=function(){var t;return t=r.template,m.isFunction(t)?t(r):t},l=function(){var t;return t=$(".up-modal"),t.attr("up-previous-url",up.browser.url()),t.attr("up-previous-title",document.title)},a=function(){var t;return t=$(".up-modal"),t.removeAttr("up-previous-url"),t.removeAttr("up-previous-title")},u=function(t){var e,n,r,o;return r=$(d()),t.sticky&&r.attr("up-sticky",""),r.attr("up-previous-url",up.browser.url()),r.attr("up-previous-title",document.title),n=r.find(".up-modal-dialog"),m.isPresent(t.width)&&n.css("width",t.width),m.isPresent(t.maxWidth)&&n.css("max-width",t.maxWidth),m.isPresent(t.height)&&n.css("height",t.height),e=r.find(".up-modal-content"),o=m.$createElementFromSelector(t.selector),o.appendTo(e),r.appendTo(document.body),l(),r.hide(),r},h=void 0,p=function(){var t,e,n;return n=m.scrollbarWidth(),t=parseInt($("body").css("padding-right")),e=n+t,h=m.temporaryCss($("body"),{"padding-right":e+"px","overflow-y":"hidden"})},v=function(t,e,n){var r;return up.bus.emit("modal:open"),p(),t.show(),r=up.animate(t,e,n),r.then(function(){return up.bus.emit("modal:opened")}),r},s=function(){var e,o,i,a,s,l,c,p,f,d,h,g,y;return s=1<=arguments.length?t.call(arguments,0):[],!m.isObject(s[0])||m.isElement(s[0])||m.isJQuery(s[0])?(e=$(s[0]),f=s[1]):(e=m.nullJquery(),f=s[0]),f=m.options(f),g=m.option(f.url,e.attr("up-href"),e.attr("href")),d=m.option(f.target,e.attr("up-modal"),"body"),y=m.option(f.width,e.attr("up-width"),r.width),p=m.option(f.maxWidth,e.attr("up-max-width"),r.maxWidth),l=m.option(f.height,e.attr("up-height"),r.height),a=m.option(f.animation,e.attr("up-animation"),r.openAnimation),h=m.option(f.sticky,m.castedAttr(e,"up-sticky")),c=up.browser.canPushState()?m.option(f.history,m.castedAttr(e,"up-history"),!0):!1,i=up.motion.animateOptions(f,e),n(),o=u({selector:d,width:y,maxWidth:p,height:l,sticky:h}),up.replace(d,g,{history:c,insert:function(){return v(o,a,i)}})},f=function(){return i},n=function(t){var e,n;return e=$(".up-modal"),e.length?(t=m.options(t,{animation:r.closeAnimation,url:e.attr("up-previous-url"),title:e.attr("up-previous-title")}),i=void 0,up.bus.emit("modal:close"),n=up.destroy(e,t),n.then(function(){return h(),up.bus.emit("modal:closed")}),n):m.resolvedPromise()},e=function(){return $(".up-modal").is("[up-sticky]")?void 0:(a(),n())},o=function(t){var e;return e=$(t),e.closest(".up-modal").length>0},up.on("click","a[up-modal]",function(t,e){return t.preventDefault(),e.is(".up-current")?n():s(e)}),up.on("click","body",function(t){var e;return e=$(t.target),e.closest(".up-modal-dialog").length||e.closest("[up-modal]").length?void 0:n()}),up.bus.on("fragment:ready",function(t){var n;if(o(t)){if(n=t.attr("up-source"))return i=n}else if(!up.popup.contains(t))return e()}),up.magic.onEscape(function(){return n()}),up.on("click","[up-close]",function(t,e){return e.closest(".up-modal")?n():void 0}),up.bus.on("framework:reset",c),{open:s,close:n,source:f,defaults:r.update,contains:o}}()}.call(this),function(){up.tooltip=function(){var t,e,n,r,o;return o=up.util,r=function(t,e,n){var r,u,i;return u=o.measure(t),i=o.measure(e),r=function(){switch(n){case"top":return{left:u.left+.5*(u.width-i.width),top:u.top-i.height};case"bottom":return{left:u.left+.5*(u.width-i.width),top:u.top+u.height};default:return o.error("Unknown position %o",n)}}(),e.attr("up-position",n),e.css(r)},e=function(t){return o.$createElementFromSelector(".up-tooltip").html(t).appendTo(document.body)},n=function(n,u){var i,a,s,l,c,p;return null==u&&(u={}),i=$(n),c=o.option(u.html,i.attr("up-tooltip"),i.attr("title")),p=o.option(u.position,i.attr("up-position"),"top"),l=o.option(u.animation,o.castedAttr(i,"up-animation"),"fade-in"),s=up.motion.animateOptions(u,i),t(),a=e(c),r(i,a,p),up.animate(a,l,s)},t=function(t){var e;return e=$(".up-tooltip"),e.length?(t=o.options(t,{animation:"fade-out"}),t=o.merge(t,up.motion.animateOptions(t)),up.destroy(e,t)):void 0},up.compiler("[up-tooltip]",function(e){return e.on("mouseover",function(){return n(e)}),e.on("mouseout",function(){return t()})}),up.on("click","body",function(){return t()}),up.bus.on("framework:reset",t),up.magic.onEscape(function(){return t()}),{open:n,close:t}}()}.call(this),function(){up.navigation=function(){var t,e,n,r,o,u,i,a,s,l,c,p,f,d,m,h,v;return m=up.util,u=m.config({currentClasses:["up-current"]}),c=function(){return u.reset()},i=function(){var t;return t=u.currentClasses,t=t.concat(["up-current"]),t=m.uniq(t),t.join(" ")},t="up-active",e=["a","[up-href]","[up-alias]"],r=e.join(", "),o=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)d=e[t],r.push(d+"[up-instant]");return r}().join(", "),n="."+t,l=function(t){return m.isPresent(t)?m.normalizeUrl(t,{search:!1,stripTrailingSlash:!0}):void 0},f=function(t){var e,n,r,o,u,i,a,s,c,p;for(s=[],i=["href","up-href","up-alias"],n=0,o=i.length;o>n;n++)if(e=i[n],c=m.presentAttr(t,e))for(p="up-alias"===e?c.split(" "):[c],r=0,u=p.length;u>r;r++)a=p[r],"#"!==a&&(a=l(a),s.push(a));return s},v=function(t){var e,n,r,o;return t=m.compact(t),r=function(t){return"*"===t.substr(-1)?n(t.slice(0,-1)):e(t)},e=function(e){return m.contains(t,e)},n=function(e){return m.detect(t,function(t){return 0===t.indexOf(e)})},o=function(t){return m.detect(t,r)},{matchesAny:o}},s=function(){var t,e;return t=v([l(up.browser.url()),l(up.modal.source()),l(up.popup.source())]),e=i(),m.each($(r),function(n){var r,o;return r=$(n),o=f(r),t.matchesAny(o)?r.addClass(e):r.removeClass(e)})},p=function(e){return h(),e=a(e),e.addClass(t)},a=function(t){return m.presence(t.parents(r))||t},h=function(){return $(n).removeClass(t)},up.on("click",r,function(t,e){return m.isUnmodifiedMouseEvent(t)&&!e.is("[up-instant]")?p(e):void 0}),up.on("mousedown",o,function(t,e){return m.isUnmodifiedMouseEvent(t)?p(e):void 0}),up.bus.on("fragment:ready",function(){return h(),s()}),up.bus.on("fragment:destroy",function(t){return t.is(".up-modal, .up-popup")?s():void 0}),up.bus.on("framework:reset",c),{defaults:u.update}}()}.call(this),function(){up.slot=function(){var t,e,n;return n=up.util,e=function(t){return""!==n.trim(t.html())},t=function(t){return n.findWithSelf(t,"[up-slot]").each(function(){var t;return t=$(this),e(t)?void 0:t.hide()})},up.bus.on("fragment:ready",t)}()}.call(this),function(){up.browser.ensureRecentJquery(),up.browser.isSupported()&&(up.browser.ensureConsoleExists(),up.bus.emit("framework:ready"),$(document).on("ready",function(){return up.bus.emit("app:ready")}))}.call(this);