- Deprecate up.replace(). It takes a selector, and that is now mostly optional.
- Deprecate up.extract(). It takes a selector, and that is now mostly optional.
- Deprecate up.visit
- Unfortunate naming: { confirm } vs. { onConfirmed }. Maybe use { accept } for layers?
- .up-layer-viewport should have { overscroll-behavior: contain }
- u.only and u.except should take an array
- up.reload()
  - should work without a target
  - up.reload() with an element should update the element in whatever layer it lives in
- Simplify z-index for layers
  - I think we only need a z-index on .up-layers and let stacking context do the rest
- Test that clicking on the layer backdrop will cause dismiss on iOS (https://code.makandra.de/makandra/studyflix/commit/cf7d016a1d00797519b709cfcb27423c6adea9d2)
- Test that [up-dismiss][up-follow] inside a layer will dismiss
- Test that [up-dismiss][up-follow] outside a layer will follow
- Documentation
- Do layers really need both [up-class] and [up-size] ? Setting size is the only use case for class. Except maybe furter variants like -borderless?
- What is up.browser.navigate() ?
- Is { navigate } is really the best name for the option? Maybe { solo } or similar?
- Go through all public API of up.fragment and check if it still makes sense or if it only works for current layer.
- Document changes in options { history } (now boolean) and { location } (now a string) changes
- Deprecate all up.modal/popup functions and delegate to layer as good as possible
- Rethink running inline scripts like we do with noscript
  - People could run a script like
        if (up.Layer.current.context.flightPicker) {
          up.Layer.current.accept({ flight_id: 5 })
        }
- Implement X-Up-Dismiss-Layer, X-Up-Accept-Layer
- Test layer { context }
- Deprecate the entire up.history API
- up.layer.* should just be class props of up.Layer
  - Then we also stop copying configs. Drawer-config is just up.Layer.Drawer.config.
  - We can still move inheritable methods to up.Layer.Base extends up.Layer
- Rethink whether up.Layer.close() should be an API instead of up.Layer.current.close()
- up.Layer.current() vs. up.Layer.current


Finishing up
------------

- Remove unused files after we copied all documentation
  - popup
  - modal

- Grep for TODO
- Test in all browsers
- Migrate cards



Accessibility
--------------

- A11Y: current layer should get [role=dialog] and [aria-modal=true], all parent layers should get [inert] and [aria-hidden: true]. Since the root layer has no containers, we should apply this to direct children
- A11Y: check if [inert] etc. are enough to have the browser rotate focus within the layer
- A11Y: opening a layer should focus the layer, optionally to [autofocus]
- A11Y: closing a layer should focus the element that opened the layer


Bootstrap integration
---------------------

- update or stop supporting unpoly-boostrap3
- should we have unpoly-bootstrap4?


Later?
------

- Do we want an ExtractPlan.BackButton? Turbolinks keep [up-keep] for back.
- Turn property-like API symbols into getter
  - e.g. up.layer.root instead of up.layer.root()
  - e.g. up.layer.current instead of up.layer.current()
- Support [up-target][up-class] and [up-target][up-fail-class] to set a class on the new fragment
  - But think how that would go together with [up-layer="new"][up-class="warning"]
- Support :destroy pseudo-class up up.change() target
- Do we need an API to change context from JS? from server via header?
- Make all module names uppercase.
  - In a ES6 world this would not even be so bad, or even necessary. import { Event } from 'up'. Event.emit(...).
  - Even consider dropping shortcuts so we always do up.Fragment.change(), up.Event.emit(...)
